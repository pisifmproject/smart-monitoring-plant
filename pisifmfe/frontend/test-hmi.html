<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>HMI Data Test</title>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  </head>
  <body>
    <h1>HMI Data Test</h1>
    <div id="output"></div>

    <script>
      async function testHMI() {
        try {
          console.log("Fetching HMI data...");
          const response = await axios.get("/api/lvmdp1/hmi");
          console.log("Response:", response.data);

          const output = document.getElementById("output");
          output.innerHTML = `
                    <h2>Success!</h2>
                    <pre>${JSON.stringify(response.data, null, 2)}</pre>
                    <ul>
                        <li>Current R: ${response.data.currentR} A</li>
                        <li>Current S: ${response.data.currentS} A</li>
                        <li>Current T: ${response.data.currentT} A</li>
                        <li>Voltage R-S: ${response.data.voltageRS} V</li>
                        <li>Voltage S-T: ${response.data.voltageST} V</li>
                        <li>Voltage T-R: ${response.data.voltageTR} V</li>
                    </ul>
                `;
        } catch (error) {
          console.error("Error:", error);
          const output = document.getElementById("output");
          output.innerHTML = `<h2>Error!</h2><pre>${
            error.message
          }\n${JSON.stringify(error.response?.data || {}, null, 2)}</pre>`;
        }
      }

      testHMI();
      setInterval(testHMI, 2000);
    </script>
  </body>
</html>
